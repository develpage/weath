<template>
  <div class="background-image-container" :style="`background-image: url(${bgImage})`">
    <div class="wrapper">
      <div class="header">
        <!-- <p class="current-time">{{ time }}</p> -->
        <div class="logo" style="max-width: 200px;">
          <svg width="100%" height="100%" viewBox="0 0 1095 303" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M137.283 270.195C121.006 275.449 103.579 276.415 86.7889 272.992C69.9993 269.57 54.452 261.883 41.7423 250.72C29.0326 239.557 19.6181 225.32 14.4649 209.47C9.3117 193.62 8.60525 176.728 12.4181 160.526C16.2309 144.324 24.4257 129.397 36.1616 117.275C47.8975 105.153 62.752 96.2735 79.2009 91.5473C95.6498 86.8212 113.101 86.4186 129.763 90.3808C146.426 94.343 172.223 114.616 172.223 114.616C172.319 103.06 172.98 91.7358 179.086 81.8069C185.191 71.8779 193.914 63.701 204.359 58.1149C214.805 52.5289 226.597 49.735 238.525 50.0198C250.453 50.3046 262.089 53.6579 272.237 59.7357C282.386 65.8134 290.198 73.2702 295.791 83.4784C301.384 93.6866 302.04 105.299 301.547 116.846C312.399 103.975 322.978 93.7973 339.055 87.9923C355.131 82.1874 372.513 80.6295 389.417 83.4784C406.32 86.3273 422.137 93.4805 435.243 104.204C448.35 114.928 458.275 128.835 464 144.5" stroke="white" stroke-width="20"/>
<path d="M189.382 215.055C189.382 213.135 188.566 211.599 186.934 210.447C185.302 209.295 183.286 208.239 180.886 207.279C178.486 206.319 175.846 205.359 172.966 204.399C170.086 203.343 167.446 201.951 165.046 200.223C162.646 198.399 160.63 196.143 158.998 193.455C157.366 190.671 156.55 187.119 156.55 182.799C156.55 175.695 158.662 170.271 162.886 166.527C167.11 162.783 173.206 160.911 181.174 160.911C186.646 160.911 191.59 161.487 196.006 162.639C200.422 163.791 203.878 165.087 206.374 166.527L202.198 180.063C199.99 179.199 197.206 178.287 193.846 177.327C190.486 176.367 187.078 175.887 183.622 175.887C178.054 175.887 175.27 178.047 175.27 182.367C175.27 184.095 176.086 185.487 177.718 186.543C179.35 187.599 181.366 188.607 183.766 189.567C186.166 190.431 188.806 191.391 191.686 192.447C194.566 193.503 197.206 194.895 199.606 196.623C202.006 198.255 204.022 200.415 205.654 203.103C207.286 205.791 208.102 209.247 208.102 213.471C208.102 220.767 205.75 226.527 201.046 230.751C196.438 234.879 189.478 236.943 180.166 236.943C175.078 236.943 170.278 236.271 165.766 234.927C161.35 233.679 157.75 232.191 154.966 230.463L160.15 216.495C162.358 217.743 165.286 218.991 168.934 220.239C172.582 221.391 176.326 221.967 180.166 221.967C182.95 221.967 185.158 221.439 186.79 220.383C188.518 219.327 189.382 217.551 189.382 215.055ZM221.908 162.927H240.628V234.927H221.908V162.927ZM219.172 142.623C219.172 139.839 220.18 137.487 222.196 135.567C224.308 133.551 227.188 132.543 230.836 132.543C234.484 132.543 237.412 133.551 239.62 135.567C241.924 137.487 243.076 139.839 243.076 142.623C243.076 145.407 241.924 147.759 239.62 149.679C237.412 151.503 234.484 152.415 230.836 152.415C227.188 152.415 224.308 151.503 222.196 149.679C220.18 147.759 219.172 145.407 219.172 142.623ZM299.892 234.927V195.759C299.892 189.135 299.268 184.431 298.02 181.647C296.772 178.863 294.18 177.471 290.244 177.471C286.98 177.471 284.34 178.383 282.324 180.207C280.308 181.935 278.772 184.191 277.716 186.975V234.927H258.996V162.927H273.54L275.7 172.431H276.276C278.484 169.359 281.268 166.671 284.628 164.367C288.084 162.063 292.5 160.911 297.876 160.911C302.484 160.911 306.228 161.871 309.108 163.791C312.084 165.615 314.388 168.735 316.02 173.151C318.228 169.407 321.06 166.431 324.516 164.223C327.972 162.015 332.148 160.911 337.044 160.911C341.076 160.911 344.484 161.391 347.268 162.351C350.148 163.311 352.452 164.991 354.18 167.391C356.004 169.695 357.348 172.815 358.212 176.751C359.076 180.687 359.508 185.679 359.508 191.727V234.927H340.788V194.463C340.788 188.799 340.164 184.575 338.916 181.791C337.764 178.911 335.124 177.471 330.996 177.471C327.636 177.471 324.948 178.383 322.932 180.207C321.012 182.031 319.572 184.527 318.612 187.695V234.927H299.892ZM374.871 162.927H388.551L390.711 171.567H391.287C393.783 167.919 396.711 165.231 400.071 163.503C403.527 161.775 407.703 160.911 412.599 160.911C421.623 160.911 428.391 163.791 432.903 169.551C437.415 175.215 439.671 184.383 439.671 197.055C439.671 203.199 438.951 208.767 437.511 213.759C436.071 218.655 433.911 222.831 431.031 226.287C428.247 229.743 424.791 232.383 420.663 234.207C416.631 236.031 411.975 236.943 406.695 236.943C403.719 236.943 401.271 236.703 399.351 236.223C397.431 235.839 395.511 235.167 393.591 234.207V263.727H374.871V162.927ZM406.983 176.751C403.335 176.751 400.455 177.663 398.343 179.487C396.327 181.311 394.743 184.047 393.591 187.695V217.647C394.935 218.703 396.375 219.567 397.911 220.239C399.543 220.815 401.655 221.103 404.247 221.103C409.623 221.103 413.655 219.231 416.343 215.487C419.031 211.647 420.375 205.359 420.375 196.623C420.375 190.287 419.319 185.391 417.207 181.935C415.095 178.479 411.687 176.751 406.983 176.751ZM471.932 210.735C471.932 214.095 472.364 216.543 473.228 218.079C474.092 219.615 475.484 220.383 477.404 220.383C478.556 220.383 479.66 220.287 480.716 220.095C481.868 219.903 483.26 219.471 484.892 218.799L486.908 233.487C485.372 234.255 483.02 235.023 479.852 235.791C476.684 236.559 473.42 236.943 470.06 236.943C464.588 236.943 460.412 235.695 457.532 233.199C454.652 230.607 453.212 226.383 453.212 220.527V134.127H471.932V210.735ZM552.564 228.735C549.684 231.039 545.748 233.007 540.756 234.639C535.86 236.175 530.628 236.943 525.06 236.943C513.444 236.943 504.948 233.583 499.572 226.863C494.196 220.047 491.508 210.735 491.508 198.927C491.508 186.255 494.532 176.751 500.58 170.415C506.628 164.079 515.124 160.911 526.068 160.911C529.716 160.911 533.268 161.391 536.724 162.351C540.18 163.311 543.252 164.895 545.94 167.103C548.628 169.311 550.788 172.287 552.42 176.031C554.052 179.775 554.868 184.431 554.868 189.999C554.868 192.015 554.724 194.175 554.436 196.479C554.244 198.783 553.908 201.183 553.428 203.679H510.228C510.516 209.727 512.052 214.287 514.836 217.359C517.716 220.431 522.324 221.967 528.66 221.967C532.596 221.967 536.1 221.391 539.172 220.239C542.34 218.991 544.74 217.743 546.372 216.495L552.564 228.735ZM525.78 175.887C520.884 175.887 517.236 177.375 514.836 180.351C512.532 183.231 511.14 187.119 510.66 192.015H537.444C537.828 186.831 537.012 182.847 534.996 180.063C533.076 177.279 530.004 175.887 525.78 175.887ZM654.811 162.927L667.915 199.791L670.507 211.743H671.083L673.099 199.647L682.315 162.927H699.451L677.275 235.647H663.451L648.907 195.327L647.035 186.255H646.315L644.587 195.471L630.763 235.647H616.507L593.323 162.927H613.627L624.139 199.071L625.867 211.887H626.587L629.035 198.927L640.987 162.927H654.811ZM762.799 228.735C759.919 231.039 755.983 233.007 750.991 234.639C746.095 236.175 740.863 236.943 735.295 236.943C723.679 236.943 715.183 233.583 709.807 226.863C704.431 220.047 701.743 210.735 701.743 198.927C701.743 186.255 704.767 176.751 710.815 170.415C716.863 164.079 725.359 160.911 736.303 160.911C739.951 160.911 743.503 161.391 746.959 162.351C750.415 163.311 753.487 164.895 756.175 167.103C758.863 169.311 761.023 172.287 762.655 176.031C764.287 179.775 765.103 184.431 765.103 189.999C765.103 192.015 764.959 194.175 764.671 196.479C764.479 198.783 764.143 201.183 763.663 203.679H720.463C720.751 209.727 722.287 214.287 725.071 217.359C727.951 220.431 732.559 221.967 738.895 221.967C742.831 221.967 746.335 221.391 749.407 220.239C752.575 218.991 754.975 217.743 756.607 216.495L762.799 228.735ZM736.015 175.887C731.119 175.887 727.471 177.375 725.071 180.351C722.767 183.231 721.375 187.119 720.895 192.015H747.679C748.063 186.831 747.247 182.847 745.231 180.063C743.311 177.279 740.239 175.887 736.015 175.887ZM777.892 167.103C781.732 165.375 786.292 164.031 791.572 163.071C796.852 162.015 802.372 161.487 808.132 161.487C813.124 161.487 817.3 162.111 820.66 163.359C824.02 164.511 826.66 166.191 828.58 168.399C830.596 170.607 831.988 173.247 832.756 176.319C833.62 179.391 834.052 182.847 834.052 186.687C834.052 190.911 833.908 195.183 833.62 199.503C833.332 203.727 833.14 207.903 833.044 212.031C833.044 216.159 833.188 220.191 833.476 224.127C833.764 227.967 834.484 231.615 835.636 235.071H820.372L817.348 225.135H816.628C814.708 228.111 812.02 230.703 808.564 232.911C805.204 235.023 800.836 236.079 795.46 236.079C792.1 236.079 789.076 235.599 786.388 234.639C783.7 233.583 781.396 232.143 779.476 230.319C777.556 228.399 776.068 226.191 775.012 223.695C773.956 221.103 773.428 218.223 773.428 215.055C773.428 210.639 774.388 206.943 776.308 203.967C778.324 200.895 781.156 198.447 784.804 196.623C788.548 194.703 792.964 193.407 798.052 192.735C803.236 191.967 808.996 191.727 815.332 192.015C816.004 186.639 815.62 182.799 814.18 180.495C812.74 178.095 809.524 176.895 804.532 176.895C800.788 176.895 796.804 177.279 792.58 178.047C788.452 178.815 785.044 179.823 782.356 181.071L777.892 167.103ZM801.652 220.671C805.396 220.671 808.372 219.855 810.58 218.223C812.788 216.495 814.42 214.671 815.476 212.751V203.391C812.5 203.103 809.62 203.055 806.836 203.247C804.148 203.439 801.748 203.871 799.636 204.543C797.524 205.215 795.844 206.175 794.596 207.423C793.348 208.671 792.724 210.255 792.724 212.175C792.724 214.863 793.492 216.975 795.028 218.511C796.66 219.951 798.868 220.671 801.652 220.671ZM842.273 162.927H852.209V149.391L870.929 144.063V162.927H888.497V178.767H870.929V206.415C870.929 211.407 871.409 215.007 872.369 217.215C873.425 219.327 875.345 220.383 878.129 220.383C880.049 220.383 881.681 220.191 883.025 219.807C884.465 219.423 886.049 218.847 887.777 218.079L891.089 232.479C888.497 233.727 885.473 234.783 882.017 235.647C878.561 236.511 875.057 236.943 871.505 236.943C864.881 236.943 859.985 235.263 856.817 231.903C853.745 228.447 852.209 222.831 852.209 215.055V178.767H842.273V162.927ZM944.028 234.927V194.031C944.028 188.175 943.212 183.951 941.58 181.359C939.948 178.767 936.972 177.471 932.652 177.471C929.484 177.471 926.556 178.575 923.868 180.783C921.276 182.895 919.548 185.631 918.684 188.991V234.927H899.964V134.127H918.684V170.991H919.26C921.564 167.919 924.396 165.471 927.756 163.647C931.116 161.823 935.388 160.911 940.572 160.911C944.22 160.911 947.436 161.391 950.22 162.351C953.004 163.311 955.308 164.895 957.132 167.103C959.052 169.311 960.444 172.335 961.308 176.175C962.268 179.919 962.748 184.575 962.748 190.143V234.927H944.028ZM1036.03 228.735C1033.15 231.039 1029.22 233.007 1024.23 234.639C1019.33 236.175 1014.1 236.943 1008.53 236.943C996.913 236.943 988.417 233.583 983.041 226.863C977.665 220.047 974.977 210.735 974.977 198.927C974.977 186.255 978.001 176.751 984.049 170.415C990.097 164.079 998.593 160.911 1009.54 160.911C1013.19 160.911 1016.74 161.391 1020.19 162.351C1023.65 163.311 1026.72 164.895 1029.41 167.103C1032.1 169.311 1034.26 172.287 1035.89 176.031C1037.52 179.775 1038.34 184.431 1038.34 189.999C1038.34 192.015 1038.19 194.175 1037.91 196.479C1037.71 198.783 1037.38 201.183 1036.9 203.679H993.697C993.985 209.727 995.521 214.287 998.305 217.359C1001.19 220.431 1005.79 221.967 1012.13 221.967C1016.07 221.967 1019.57 221.391 1022.64 220.239C1025.81 218.991 1028.21 217.743 1029.84 216.495L1036.03 228.735ZM1009.25 175.887C1004.35 175.887 1000.71 177.375 998.305 180.351C996.001 183.231 994.609 187.119 994.129 192.015H1020.91C1021.3 186.831 1020.48 182.847 1018.47 180.063C1016.55 177.279 1013.47 175.887 1009.25 175.887ZM1091.3 180.495C1088.33 179.439 1085.64 178.911 1083.24 178.911C1079.88 178.911 1077.05 179.823 1074.74 181.647C1072.53 183.375 1071.05 185.631 1070.28 188.415V234.927H1051.56V162.927H1066.1L1068.26 172.431H1068.84C1070.47 168.879 1072.68 166.143 1075.46 164.223C1078.25 162.303 1081.51 161.343 1085.25 161.343C1087.75 161.343 1090.58 161.871 1093.75 162.927L1091.3 180.495Z" fill="white"/>
</svg>


        </div>
        <search-city></search-city>
      </div>

      <current-weather>
        <h1 class="city-name">{{ cityData.otherData.city }} {{ time }}</h1>
      </current-weather>
      <forecast></forecast>
      <!-- <WeatherMap /> -->



    </div>
  </div>  
</template>

<script>
// import SearchCity from './SearchCityComponent/SearchCity'
// import CurrentWeather from './CurrentWeatherComponent/CurrentWeather'
// import Forecast from './ForecastComponent/Forecast'
// import WeatherMap from './WeatherMap/WeatherMap'
import axios from 'axios'
import { mapState } from 'vuex'

export default {
  name: 'MainComponent',
  components: {
    SearchCity: () => import('./SearchCityComponent/SearchCity'),
    CurrentWeather: () => import('./CurrentWeatherComponent/CurrentWeather'),
    Forecast: () => import('./ForecastComponent/Forecast'),
    // WeatherMap
  },
  data () {
    return {
      time: '',
      bgImage: ''
    }
  },
  mounted () {
    setInterval(() => {
      this.currentTime()
    }, 1000)
    this.getBgImage()
  },
  computed: {
    ...mapState(['cityData'])    
  },
  methods: {
    currentTime() {
      const date = new Date()      
      this.time = `${(date.getHours() < 10) ? '0' + date.getHours() : date.getHours()}:${(date.getMinutes() < 10) ? '0' + date.getMinutes() : date.getMinutes()}`
    },
    getBgImage() {
      let random = Math.ceil(Math.random() * 1000)
      axios.get(`https://api.pexels.com/v1/search?query=clouds&per_page=1&page=${random}`,
        {
          headers: {
            // 'Accept': 'application/json',
            'Authorization': process.env.VUE_APP_PIXELS_API_KEY
          }
        })
        .then(response => {
          this.bgImage = response.data.photos[0].src.original
          console.log(response)
        })
        .catch(err => {
          console.log(err)
        })
    }
  }
}
</script>


<style scoped>

</style>
